<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>pbrt: reflection.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>reflection.h</h1><a href="reflection_8h.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 
00002 <span class="comment">/*</span>
00003 <span class="comment"> * pbrt source code Copyright(c) 1998-2005 Matt Pharr and Greg Humphreys</span>
00004 <span class="comment"> *</span>
00005 <span class="comment"> * All Rights Reserved.</span>
00006 <span class="comment"> * For educational use only; commercial use expressly forbidden.</span>
00007 <span class="comment"> * NO WARRANTY, express or implied, for this software.</span>
00008 <span class="comment"> * (See file License.txt for complete license)</span>
00009 <span class="comment"> */</span>
00010 
00011 <span class="preprocessor">#ifndef PBRT_REFLECTION_H</span>
00012 <span class="preprocessor"></span><span class="preprocessor">#define PBRT_REFLECTION_H</span>
00013 <span class="preprocessor"></span><span class="comment">// reflection.h*</span>
00014 <span class="preprocessor">#include "<a class="code" href="pbrt_8h.html">pbrt.h</a>"</span>
00015 <span class="preprocessor">#include "<a class="code" href="geometry_8h.html">geometry.h</a>"</span>
00016 <span class="preprocessor">#include "<a class="code" href="shape_8h.html">shape.h</a>"</span>
00017 <span class="comment">// BSDF Inline Functions</span>
<a name="l00018"></a><a class="code" href="reflection_8h.html#a11">00018</a> <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="reflection_8h.html#a11">CosTheta</a>(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;w) { <span class="keywordflow">return</span> w.<a class="code" href="classVector.html#o2">z</a>; }
<a name="l00019"></a><a class="code" href="reflection_8h.html#a12">00019</a> <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="reflection_8h.html#a12">SinTheta</a>(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;w) {
00020         <span class="keywordflow">return</span> sqrtf(max(0.f, 1.f - w.<a class="code" href="classVector.html#o2">z</a>*w.<a class="code" href="classVector.html#o2">z</a>));
00021 }
<a name="l00022"></a><a class="code" href="reflection_8h.html#a13">00022</a> <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="reflection_8h.html#a13">SinTheta2</a>(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;w) {
00023         <span class="keywordflow">return</span> 1.f - <a class="code" href="reflection_8h.html#a11">CosTheta</a>(w)*<a class="code" href="reflection_8h.html#a11">CosTheta</a>(w);
00024 }
<a name="l00025"></a><a class="code" href="reflection_8h.html#a14">00025</a> <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="reflection_8h.html#a14">CosPhi</a>(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;w) {
00026         <span class="keywordflow">return</span> w.<a class="code" href="classVector.html#o0">x</a> / <a class="code" href="reflection_8h.html#a12">SinTheta</a>(w);
00027 }
<a name="l00028"></a><a class="code" href="reflection_8h.html#a15">00028</a> <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="reflection_8h.html#a15">SinPhi</a>(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;w) {
00029         <span class="keywordflow">return</span> w.<a class="code" href="classVector.html#o1">y</a> / <a class="code" href="reflection_8h.html#a12">SinTheta</a>(w);
00030 }
<a name="l00031"></a><a class="code" href="reflection_8h.html#a16">00031</a> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="reflection_8h.html#a16">SameHemisphere</a>(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;w,
00032                           <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wp) {
00033         <span class="keywordflow">return</span> w.<a class="code" href="classVector.html#o2">z</a> * wp.<a class="code" href="classVector.html#o2">z</a> &gt; 0.f;
00034 }
00035 <span class="comment">// BSDF Declarations</span>
<a name="l00036"></a><a class="code" href="reflection_8h.html#a17">00036</a> <span class="keyword">enum</span> <a class="code" href="reflection_8h.html#a17">BxDFType</a> {
00037         <a class="code" href="reflection_8h.html#a17a2">BSDF_REFLECTION</a>   = 1&lt;&lt;0,
00038         <a class="code" href="reflection_8h.html#a17a3">BSDF_TRANSMISSION</a> = 1&lt;&lt;1,
00039         <a class="code" href="reflection_8h.html#a17a4">BSDF_DIFFUSE</a>      = 1&lt;&lt;2,
00040         <a class="code" href="reflection_8h.html#a17a5">BSDF_GLOSSY</a>       = 1&lt;&lt;3,
00041         <a class="code" href="reflection_8h.html#a17a6">BSDF_SPECULAR</a>     = 1&lt;&lt;4,
00042         <a class="code" href="reflection_8h.html#a17a7">BSDF_ALL_TYPES</a>        = <a class="code" href="reflection_8h.html#a17a4">BSDF_DIFFUSE</a> |
00043                                 <a class="code" href="reflection_8h.html#a17a5">BSDF_GLOSSY</a> |
00044                                                 <a class="code" href="reflection_8h.html#a17a6">BSDF_SPECULAR</a>,
00045         <a class="code" href="reflection_8h.html#a17a8">BSDF_ALL_REFLECTION</a>   = <a class="code" href="reflection_8h.html#a17a2">BSDF_REFLECTION</a> |
00046                                 <a class="code" href="reflection_8h.html#a17a7">BSDF_ALL_TYPES</a>,
00047         <a class="code" href="reflection_8h.html#a17a9">BSDF_ALL_TRANSMISSION</a> = <a class="code" href="reflection_8h.html#a17a3">BSDF_TRANSMISSION</a> |
00048                                 <a class="code" href="reflection_8h.html#a17a7">BSDF_ALL_TYPES</a>,
00049         <a class="code" href="reflection_8h.html#a17a10">BSDF_ALL</a>              = <a class="code" href="reflection_8h.html#a17a8">BSDF_ALL_REFLECTION</a> |
00050                                 <a class="code" href="reflection_8h.html#a17a9">BSDF_ALL_TRANSMISSION</a>
00051 };
<a name="l00052"></a><a class="code" href="classBSDF.html">00052</a> <span class="keyword">class </span><a class="code" href="pbrt_8h.html#a1">COREDLL</a> BSDF {
00053 <span class="keyword">public</span>:
00054         <span class="comment">// BSDF Public Methods</span>
00055         <a class="code" href="classSpectrum.html">Spectrum</a> Sample_f(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;o, <a class="code" href="classVector.html">Vector</a> *wi, <span class="keywordtype">float</span> u1, <span class="keywordtype">float</span> u2,
00056                 <span class="keywordtype">float</span> u3, <span class="keywordtype">float</span> *pdf, <a class="code" href="reflection_8h.html#a17">BxDFType</a> flags = <a class="code" href="reflection_8h.html#a17a10">BSDF_ALL</a>,
00057                 <a class="code" href="reflection_8h.html#a17">BxDFType</a> *sampledType = NULL) <span class="keyword">const</span>;
00058         <a class="code" href="classSpectrum.html">Spectrum</a> Sample_f(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wo, <a class="code" href="classVector.html">Vector</a> *wi,
00059                 <a class="code" href="reflection_8h.html#a17">BxDFType</a> flags = <a class="code" href="reflection_8h.html#a17a10">BSDF_ALL</a>,
00060                 <a class="code" href="reflection_8h.html#a17">BxDFType</a> *sampledType = NULL) <span class="keyword">const</span>;
00061         <span class="keywordtype">float</span> Pdf(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wo,
00062                   <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wi,
00063                           <a class="code" href="reflection_8h.html#a17">BxDFType</a> flags = <a class="code" href="reflection_8h.html#a17a10">BSDF_ALL</a>) <span class="keyword">const</span>;
00064         BSDF(<span class="keyword">const</span> <a class="code" href="structDifferentialGeometry.html">DifferentialGeometry</a> &amp;dgs,
00065              <span class="keyword">const</span> <a class="code" href="classNormal.html">Normal</a> &amp;ngeom,
00066                  <span class="keywordtype">float</span> eta = 1.f);
00067         <span class="keyword">inline</span> <span class="keywordtype">void</span> Add(<a class="code" href="classBxDF.html">BxDF</a> *bxdf);
<a name="l00068"></a><a class="code" href="classBSDF.html#a5">00068</a>         <span class="keywordtype">int</span> NumComponents()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> nBxDFs; }
00069         <span class="keywordtype">int</span> NumComponents(BxDFType flags) <span class="keyword">const</span>;
<a name="l00070"></a><a class="code" href="classBSDF.html#a7">00070</a>         <span class="keywordtype">bool</span> HasShadingGeometry()<span class="keyword"> const </span>{
00071                 <span class="keywordflow">return</span> (nn.x != ng.x || nn.y != ng.y || nn.z != ng.z);
00072         }
<a name="l00073"></a><a class="code" href="classBSDF.html#a8">00073</a>         <a class="code" href="classVector.html">Vector</a> WorldToLocal(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;v)<span class="keyword"> const </span>{
00074                 <span class="keywordflow">return</span> <a class="code" href="classVector.html">Vector</a>(<a class="code" href="geometry_8h.html#a17">Dot</a>(v, sn), <a class="code" href="geometry_8h.html#a17">Dot</a>(v, tn), <a class="code" href="geometry_8h.html#a17">Dot</a>(v, nn));
00075         }
<a name="l00076"></a><a class="code" href="classBSDF.html#a9">00076</a>         <a class="code" href="classVector.html">Vector</a> LocalToWorld(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;v)<span class="keyword"> const </span>{
00077                 <span class="keywordflow">return</span> <a class="code" href="classVector.html">Vector</a>(sn.x * v.<a class="code" href="classVector.html#o0">x</a> + tn.x * v.<a class="code" href="classVector.html#o1">y</a> + nn.x * v.<a class="code" href="classVector.html#o2">z</a>,
00078                               sn.y * v.<a class="code" href="classVector.html#o0">x</a> + tn.y * v.<a class="code" href="classVector.html#o1">y</a> + nn.y * v.<a class="code" href="classVector.html#o2">z</a>,
00079                               sn.z * v.<a class="code" href="classVector.html#o0">x</a> + tn.z * v.<a class="code" href="classVector.html#o1">y</a> + nn.z * v.<a class="code" href="classVector.html#o2">z</a>);
00080         }
00081         <a class="code" href="classSpectrum.html">Spectrum</a> f(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;woW, <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wiW,
00082                 BxDFType flags = BSDF_ALL) <span class="keyword">const</span>;
00083         <a class="code" href="classSpectrum.html">Spectrum</a> rho(BxDFType flags = BSDF_ALL) <span class="keyword">const</span>;
00084         <a class="code" href="classSpectrum.html">Spectrum</a> rho(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wo,
00085                      BxDFType flags = BSDF_ALL) <span class="keyword">const</span>;
<a name="l00086"></a><a class="code" href="classBSDF.html#e0">00086</a>         <span class="keyword">static</span> <span class="keywordtype">void</span> *Alloc(<a class="code" href="pbrt_8h.html#a51">u_int</a> sz) { <span class="keywordflow">return</span> arena.Alloc(sz); }
<a name="l00087"></a><a class="code" href="classBSDF.html#e1">00087</a>         <span class="keyword">static</span> <span class="keywordtype">void</span> FreeAll() { arena.FreeAll(); }
00088         <span class="comment">// BSDF Public Data</span>
<a name="l00089"></a><a class="code" href="classBSDF.html#o0">00089</a>         <span class="keyword">const</span> <a class="code" href="structDifferentialGeometry.html">DifferentialGeometry</a> dgShading;
<a name="l00090"></a><a class="code" href="classBSDF.html#o1">00090</a>         <span class="keyword">const</span> <span class="keywordtype">float</span> eta;
00091 <span class="keyword">private</span>:
00092         <span class="comment">// BSDF Private Methods</span>
<a name="l00093"></a><a class="code" href="classBSDF.html#d0">00093</a>         ~BSDF() { }
00094         <span class="keyword">friend</span> <span class="keyword">class </span>NoSuchClass;
00095         <span class="comment">// BSDF Private Data</span>
<a name="l00096"></a><a class="code" href="classBSDF.html#r0">00096</a>         <a class="code" href="classNormal.html">Normal</a> nn, ng;
<a name="l00097"></a><a class="code" href="classBSDF.html#r3">00097</a>         <a class="code" href="classVector.html">Vector</a> sn, tn;
<a name="l00098"></a><a class="code" href="classBSDF.html#r4">00098</a>         <span class="keywordtype">int</span> nBxDFs;
<a name="l00099"></a><a class="code" href="reflection_8h.html#a0">00099</a> <span class="preprocessor">        #define MAX_BxDFS 8</span>
<a name="l00100"></a><a class="code" href="classBSDF.html#r5">00100</a> <span class="preprocessor"></span>        <a class="code" href="classBxDF.html">BxDF</a> * bxdfs[<a class="code" href="reflection_8h.html#a0">MAX_BxDFS</a>];
00101         <span class="keyword">static</span> <a class="code" href="classMemoryArena.html">MemoryArena</a> arena;
00102 };
<a name="l00103"></a><a class="code" href="reflection_8h.html#a1">00103</a> <span class="preprocessor">#define BSDF_ALLOC(T)  new (BSDF::Alloc(sizeof(T))) T</span>
00104 <span class="preprocessor"></span><span class="comment">// BxDF Declarations</span>
<a name="l00105"></a><a class="code" href="classBxDF.html">00105</a> <span class="keyword">class </span><a class="code" href="pbrt_8h.html#a1">COREDLL</a> BxDF {
00106 <span class="keyword">public</span>:
00107         <span class="comment">// BxDF Interface</span>
<a name="l00108"></a><a class="code" href="classBxDF.html#a0">00108</a>         <span class="keyword">virtual</span> ~BxDF() { }
<a name="l00109"></a><a class="code" href="classBxDF.html#a1">00109</a>         BxDF(BxDFType t) : type(t) { }
<a name="l00110"></a><a class="code" href="classBxDF.html#a2">00110</a>         <span class="keywordtype">bool</span> MatchesFlags(BxDFType flags)<span class="keyword"> const </span>{
00111                 <span class="keywordflow">return</span> (type &amp; flags) == type;
00112         }
00113         <span class="keyword">virtual</span> <a class="code" href="classSpectrum.html">Spectrum</a> f(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wo,
00114                            <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wi) <span class="keyword">const</span> = 0;
00115         <span class="keyword">virtual</span> <a class="code" href="classSpectrum.html">Spectrum</a> Sample_f(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wo, <a class="code" href="classVector.html">Vector</a> *wi,
00116                 <span class="keywordtype">float</span> u1, <span class="keywordtype">float</span> u2, <span class="keywordtype">float</span> *pdf) <span class="keyword">const</span>;
00117         <span class="keyword">virtual</span> <a class="code" href="classSpectrum.html">Spectrum</a> rho(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wo,
00118                              <span class="keywordtype">int</span> nSamples = 16,
00119                                  <span class="keywordtype">float</span> *samples = NULL) <span class="keyword">const</span>;
00120         <span class="keyword">virtual</span> <a class="code" href="classSpectrum.html">Spectrum</a> rho(<span class="keywordtype">int</span> nSamples = 16,
00121                              <span class="keywordtype">float</span> *samples = NULL) <span class="keyword">const</span>;
00122         <span class="keyword">virtual</span> <span class="keywordtype">float</span> Pdf(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wi, <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wo) <span class="keyword">const</span>;
00123         <span class="comment">// BxDF Public Data</span>
<a name="l00124"></a><a class="code" href="classBxDF.html#o0">00124</a>         <span class="keyword">const</span> <a class="code" href="reflection_8h.html#a17">BxDFType</a> type;
00125 };
<a name="l00126"></a><a class="code" href="classBRDFToBTDF.html">00126</a> <span class="keyword">class </span><a class="code" href="pbrt_8h.html#a1">COREDLL</a> BRDFToBTDF : <span class="keyword">public</span> BxDF {
00127 <span class="keyword">public</span>:
00128         <span class="comment">// BRDFToBTDF Public Methods</span>
<a name="l00129"></a><a class="code" href="classBRDFToBTDF.html#a0">00129</a>         BRDFToBTDF(BxDF *b)
00130                 : BxDF(<a class="code" href="reflection_8h.html#a17">BxDFType</a>(b-&gt;type ^
00131                                (<a class="code" href="reflection_8h.html#a17a2">BSDF_REFLECTION</a> | <a class="code" href="reflection_8h.html#a17a3">BSDF_TRANSMISSION</a>))) {
00132                 brdf = b;
00133         }
<a name="l00134"></a><a class="code" href="classBRDFToBTDF.html#e0">00134</a>         <span class="keyword">static</span> <a class="code" href="classVector.html">Vector</a> otherHemisphere(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;w) {
00135                 <span class="keywordflow">return</span> <a class="code" href="classVector.html">Vector</a>(w.<a class="code" href="classVector.html#o0">x</a>, w.<a class="code" href="classVector.html#o1">y</a>, -w.<a class="code" href="classVector.html#o2">z</a>);
00136         }
<a name="l00137"></a><a class="code" href="classBRDFToBTDF.html#a1">00137</a>         <a class="code" href="classSpectrum.html">Spectrum</a> rho(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;w, <span class="keywordtype">int</span> nSamples,
00138                         <span class="keywordtype">float</span> *samples)<span class="keyword"> const </span>{
00139                 <span class="keywordflow">return</span> brdf-&gt;rho(otherHemisphere(w), nSamples, samples);
00140         }
<a name="l00141"></a><a class="code" href="classBRDFToBTDF.html#a2">00141</a>         <a class="code" href="classSpectrum.html">Spectrum</a> rho(<span class="keywordtype">int</span> nSamples, <span class="keywordtype">float</span> *samples)<span class="keyword"> const </span>{
00142                 <span class="keywordflow">return</span> brdf-&gt;rho(nSamples, samples);
00143         }
00144         <a class="code" href="classSpectrum.html">Spectrum</a> f(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wo, <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wi) <span class="keyword">const</span>;
00145         <a class="code" href="classSpectrum.html">Spectrum</a> Sample_f(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wo, <a class="code" href="classVector.html">Vector</a> *wi,
00146                 <span class="keywordtype">float</span> u1, <span class="keywordtype">float</span> u2, <span class="keywordtype">float</span> *pdf) <span class="keyword">const</span>;
00147         <span class="keywordtype">float</span> Pdf(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wo, <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wi) <span class="keyword">const</span>;
00148 <span class="keyword">private</span>:
<a name="l00149"></a><a class="code" href="classBRDFToBTDF.html#r0">00149</a>         BxDF *brdf;
00150 };
<a name="l00151"></a><a class="code" href="classFresnel.html">00151</a> <span class="keyword">class </span><a class="code" href="pbrt_8h.html#a1">COREDLL</a> Fresnel {
00152 <span class="keyword">public</span>:
00153         <span class="comment">// Fresnel Interface</span>
00154         <span class="keyword">virtual</span> ~Fresnel();
00155         <span class="keyword">virtual</span> <a class="code" href="classSpectrum.html">Spectrum</a> Evaluate(<span class="keywordtype">float</span> cosi) <span class="keyword">const</span> = 0;
00156 };
<a name="l00157"></a><a class="code" href="classFresnelConductor.html">00157</a> <span class="keyword">class </span><a class="code" href="pbrt_8h.html#a1">COREDLL</a> FresnelConductor : <span class="keyword">public</span> Fresnel {
00158 <span class="keyword">public</span>:
00159         <span class="comment">// FresnelConductor Public Methods</span>
00160         <a class="code" href="classSpectrum.html">Spectrum</a> Evaluate(<span class="keywordtype">float</span> cosi) <span class="keyword">const</span>;
<a name="l00161"></a><a class="code" href="classFresnelConductor.html#a1">00161</a>         FresnelConductor(<span class="keyword">const</span> <a class="code" href="classSpectrum.html">Spectrum</a> &amp;e, <span class="keyword">const</span> <a class="code" href="classSpectrum.html">Spectrum</a> &amp;kk)
00162                 : eta(e), k(kk) {
00163         }
00164 <span class="keyword">private</span>:
00165         <span class="comment">// FresnelConductor Private Data</span>
<a name="l00166"></a><a class="code" href="classFresnelConductor.html#r1">00166</a>         <a class="code" href="classSpectrum.html">Spectrum</a> eta, k;
00167 };
<a name="l00168"></a><a class="code" href="classFresnelDielectric.html">00168</a> <span class="keyword">class </span><a class="code" href="pbrt_8h.html#a1">COREDLL</a> FresnelDielectric : <span class="keyword">public</span> Fresnel {
00169 <span class="keyword">public</span>:
00170         <span class="comment">// FresnelDielectric Public Methods</span>
00171         <a class="code" href="classSpectrum.html">Spectrum</a> Evaluate(<span class="keywordtype">float</span> cosi) <span class="keyword">const</span>;
<a name="l00172"></a><a class="code" href="classFresnelDielectric.html#a1">00172</a>         FresnelDielectric(<span class="keywordtype">float</span> ei, <span class="keywordtype">float</span> et) {
00173                 eta_i = ei;
00174                 eta_t = et;
00175         }
00176 <span class="keyword">private</span>:
00177         <span class="comment">// FresnelDielectric Private Data</span>
<a name="l00178"></a><a class="code" href="classFresnelDielectric.html#r1">00178</a>         <span class="keywordtype">float</span> eta_i, eta_t;
00179 };
<a name="l00180"></a><a class="code" href="classFresnelNoOp.html">00180</a> <span class="keyword">class </span><a class="code" href="pbrt_8h.html#a1">COREDLL</a> FresnelNoOp : <span class="keyword">public</span> Fresnel {
00181 <span class="keyword">public</span>:
<a name="l00182"></a><a class="code" href="classFresnelNoOp.html#a0">00182</a>         <a class="code" href="classSpectrum.html">Spectrum</a> Evaluate(<span class="keywordtype">float</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classSpectrum.html">Spectrum</a>(1.); }
00183 };
<a name="l00184"></a><a class="code" href="classSpecularReflection.html">00184</a> <span class="keyword">class </span><a class="code" href="pbrt_8h.html#a1">COREDLL</a> SpecularReflection : <span class="keyword">public</span> BxDF {
00185 <span class="keyword">public</span>:
00186         <span class="comment">// SpecularReflection Public Methods</span>
<a name="l00187"></a><a class="code" href="classSpecularReflection.html#a0">00187</a>         SpecularReflection(<span class="keyword">const</span> <a class="code" href="classSpectrum.html">Spectrum</a> &amp;r, Fresnel *f)
00188                 : BxDF(<a class="code" href="reflection_8h.html#a17">BxDFType</a>(<a class="code" href="reflection_8h.html#a17a2">BSDF_REFLECTION</a> | <a class="code" href="reflection_8h.html#a17a6">BSDF_SPECULAR</a>)),
00189                   R(r), fresnel(f) {
00190         }
<a name="l00191"></a><a class="code" href="classSpecularReflection.html#a1">00191</a>         <a class="code" href="classSpectrum.html">Spectrum</a> f(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;, <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;)<span class="keyword"> const </span>{
00192                 <span class="keywordflow">return</span> <a class="code" href="classSpectrum.html">Spectrum</a>(0.);
00193         }
00194         <a class="code" href="classSpectrum.html">Spectrum</a> Sample_f(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wo, <a class="code" href="classVector.html">Vector</a> *wi,
00195                           <span class="keywordtype">float</span> u1, <span class="keywordtype">float</span> u2, <span class="keywordtype">float</span> *pdf) <span class="keyword">const</span>;
<a name="l00196"></a><a class="code" href="classSpecularReflection.html#a3">00196</a>         <span class="keywordtype">float</span> Pdf(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wo, <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wi)<span class="keyword"> const </span>{
00197                 <span class="keywordflow">return</span> 0.;
00198         }
00199 <span class="keyword">private</span>:
00200         <span class="comment">// SpecularReflection Private Data</span>
<a name="l00201"></a><a class="code" href="classSpecularReflection.html#r0">00201</a>         <a class="code" href="classSpectrum.html">Spectrum</a> R;
<a name="l00202"></a><a class="code" href="classSpecularReflection.html#r1">00202</a>         Fresnel *fresnel;
00203 };
<a name="l00204"></a><a class="code" href="classSpecularTransmission.html">00204</a> <span class="keyword">class </span><a class="code" href="pbrt_8h.html#a1">COREDLL</a> SpecularTransmission : <span class="keyword">public</span> BxDF {
00205 <span class="keyword">public</span>:
00206         <span class="comment">// SpecularTransmission Public Methods</span>
<a name="l00207"></a><a class="code" href="classSpecularTransmission.html#a0">00207</a>         SpecularTransmission(<span class="keyword">const</span> <a class="code" href="classSpectrum.html">Spectrum</a> &amp;t, <span class="keywordtype">float</span> ei, <span class="keywordtype">float</span> et)
00208                 : BxDF(<a class="code" href="reflection_8h.html#a17">BxDFType</a>(<a class="code" href="reflection_8h.html#a17a3">BSDF_TRANSMISSION</a> | <a class="code" href="reflection_8h.html#a17a6">BSDF_SPECULAR</a>)),
00209                   fresnel(ei, et) {
00210                 T = t;
00211                 etai = ei;
00212                 etat = et;
00213         }
<a name="l00214"></a><a class="code" href="classSpecularTransmission.html#a1">00214</a>         <a class="code" href="classSpectrum.html">Spectrum</a> f(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;, <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;)<span class="keyword"> const </span>{
00215                 <span class="keywordflow">return</span> <a class="code" href="classSpectrum.html">Spectrum</a>(0.);
00216         }
00217         <a class="code" href="classSpectrum.html">Spectrum</a> Sample_f(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wo, <a class="code" href="classVector.html">Vector</a> *wi, <span class="keywordtype">float</span> u1, <span class="keywordtype">float</span> u2, <span class="keywordtype">float</span> *pdf) <span class="keyword">const</span>;
<a name="l00218"></a><a class="code" href="classSpecularTransmission.html#a3">00218</a>         <span class="keywordtype">float</span> Pdf(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wo, <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wi)<span class="keyword"> const </span>{
00219                 <span class="keywordflow">return</span> 0.;
00220         }
00221 <span class="keyword">private</span>:
00222         <span class="comment">// SpecularTransmission Private Data</span>
<a name="l00223"></a><a class="code" href="classSpecularTransmission.html#r0">00223</a>         <a class="code" href="classSpectrum.html">Spectrum</a> T;
<a name="l00224"></a><a class="code" href="classSpecularTransmission.html#r2">00224</a>         <span class="keywordtype">float</span> etai, etat;
<a name="l00225"></a><a class="code" href="classSpecularTransmission.html#r3">00225</a>         FresnelDielectric fresnel;
00226 };
<a name="l00227"></a><a class="code" href="classLambertian.html">00227</a> <span class="keyword">class </span><a class="code" href="pbrt_8h.html#a1">COREDLL</a> Lambertian : <span class="keyword">public</span> BxDF {
00228 <span class="keyword">public</span>:
00229         <span class="comment">// Lambertian Public Methods</span>
<a name="l00230"></a><a class="code" href="classLambertian.html#a0">00230</a>         Lambertian(<span class="keyword">const</span> <a class="code" href="classSpectrum.html">Spectrum</a> &amp;reflectance)
00231                 : BxDF(<a class="code" href="reflection_8h.html#a17">BxDFType</a>(<a class="code" href="reflection_8h.html#a17a2">BSDF_REFLECTION</a> | <a class="code" href="reflection_8h.html#a17a4">BSDF_DIFFUSE</a>)),
00232                   R(reflectance), RoverPI(reflectance * <a class="code" href="pbrt_8h.html#a7">INV_PI</a>) {
00233         }
00234         <a class="code" href="classSpectrum.html">Spectrum</a> f(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wo, <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wi) <span class="keyword">const</span>;
<a name="l00235"></a><a class="code" href="classLambertian.html#a2">00235</a>         <a class="code" href="classSpectrum.html">Spectrum</a> rho(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;, <span class="keywordtype">int</span>, <span class="keywordtype">float</span> *)<span class="keyword"> const </span>{
00236                 <span class="keywordflow">return</span> R;
00237         }
<a name="l00238"></a><a class="code" href="classLambertian.html#a3">00238</a>         <a class="code" href="classSpectrum.html">Spectrum</a> rho(<span class="keywordtype">int</span>, <span class="keywordtype">float</span> *)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> R; }
00239 <span class="keyword">private</span>:
00240         <span class="comment">// Lambertian Private Data</span>
<a name="l00241"></a><a class="code" href="classLambertian.html#r1">00241</a>         <a class="code" href="classSpectrum.html">Spectrum</a> R, RoverPI;
00242 };
<a name="l00243"></a><a class="code" href="classOrenNayar.html">00243</a> <span class="keyword">class </span><a class="code" href="pbrt_8h.html#a1">COREDLL</a> OrenNayar : <span class="keyword">public</span> BxDF {
00244 <span class="keyword">public</span>:
00245         <span class="comment">// OrenNayar Public Methods</span>
00246         <a class="code" href="classSpectrum.html">Spectrum</a> f(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wo, <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wi) <span class="keyword">const</span>;
<a name="l00247"></a><a class="code" href="classOrenNayar.html#a1">00247</a>         OrenNayar(<span class="keyword">const</span> <a class="code" href="classSpectrum.html">Spectrum</a> &amp;reflectance, <span class="keywordtype">float</span> sig)
00248                 : BxDF(<a class="code" href="reflection_8h.html#a17">BxDFType</a>(<a class="code" href="reflection_8h.html#a17a2">BSDF_REFLECTION</a> | <a class="code" href="reflection_8h.html#a17a4">BSDF_DIFFUSE</a>)),
00249                   R(reflectance) {
00250                 <span class="keywordtype">float</span> sigma = <a class="code" href="pbrt_8h.html#a98">Radians</a>(sig);
00251                 <span class="keywordtype">float</span> sigma2 = sigma*sigma;
00252                 A = 1.f - (sigma2 / (2.f * (sigma2 + 0.33f)));
00253                 B = 0.45f * sigma2 / (sigma2 + 0.09f);
00254         }
00255 <span class="keyword">private</span>:
00256         <span class="comment">// OrenNayar Private Data</span>
<a name="l00257"></a><a class="code" href="classOrenNayar.html#r0">00257</a>         <a class="code" href="classSpectrum.html">Spectrum</a> R;
<a name="l00258"></a><a class="code" href="classOrenNayar.html#r2">00258</a>         <span class="keywordtype">float</span> A, B;
00259 };
<a name="l00260"></a><a class="code" href="classMicrofacetDistribution.html">00260</a> <span class="keyword">class </span><a class="code" href="pbrt_8h.html#a1">COREDLL</a> MicrofacetDistribution {
00261 <span class="keyword">public</span>:
00262         <span class="comment">// MicrofacetDistribution Interface</span>
<a name="l00263"></a><a class="code" href="classMicrofacetDistribution.html#a0">00263</a>         <span class="keyword">virtual</span> ~MicrofacetDistribution() { }
00264         <span class="keyword">virtual</span> <span class="keywordtype">float</span> D(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wh) <span class="keyword">const</span> = 0;
00265         <span class="keyword">virtual</span> <span class="keywordtype">void</span> Sample_f(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wo, <a class="code" href="classVector.html">Vector</a> *wi,
00266                 <span class="keywordtype">float</span> u1, <span class="keywordtype">float</span> u2, <span class="keywordtype">float</span> *pdf) <span class="keyword">const</span> = 0;
00267         <span class="keyword">virtual</span> <span class="keywordtype">float</span> Pdf(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wo,
00268                           <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wi) <span class="keyword">const</span> = 0;
00269 };
<a name="l00270"></a><a class="code" href="classMicrofacet.html">00270</a> <span class="keyword">class </span><a class="code" href="pbrt_8h.html#a1">COREDLL</a> Microfacet : <span class="keyword">public</span> BxDF {
00271 <span class="keyword">public</span>:
00272         <span class="comment">// Microfacet Public Methods</span>
00273         Microfacet(<span class="keyword">const</span> <a class="code" href="classSpectrum.html">Spectrum</a> &amp;reflectance, Fresnel *f,
00274                 MicrofacetDistribution *d);
00275         <a class="code" href="classSpectrum.html">Spectrum</a> f(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wo, <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wi) <span class="keyword">const</span>;
<a name="l00276"></a><a class="code" href="classMicrofacet.html#a2">00276</a>         <span class="keywordtype">float</span> G(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wo, <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wi,
00277                         <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wh)<span class="keyword"> const </span>{
00278                 <span class="keywordtype">float</span> NdotWh = fabsf(<a class="code" href="reflection_8h.html#a11">CosTheta</a>(wh));
00279                 <span class="keywordtype">float</span> NdotWo = fabsf(<a class="code" href="reflection_8h.html#a11">CosTheta</a>(wo));
00280                 <span class="keywordtype">float</span> NdotWi = fabsf(<a class="code" href="reflection_8h.html#a11">CosTheta</a>(wi));
00281                 <span class="keywordtype">float</span> WOdotWh = <a class="code" href="geometry_8h.html#a20">AbsDot</a>(wo, wh);
00282                 <span class="keywordflow">return</span> min(1.f, min((2.f * NdotWh * NdotWo / WOdotWh),
00283                                 (2.f * NdotWh * NdotWi / WOdotWh)));
00284         }
00285         <a class="code" href="classSpectrum.html">Spectrum</a> Sample_f(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wo, <a class="code" href="classVector.html">Vector</a> *wi,
00286                 <span class="keywordtype">float</span> u1, <span class="keywordtype">float</span> u2, <span class="keywordtype">float</span> *pdf) <span class="keyword">const</span>;
00287         <span class="keywordtype">float</span> Pdf(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wo, <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wi) <span class="keyword">const</span>;
00288 <span class="keyword">private</span>:
00289         <span class="comment">// Microfacet Private Data</span>
<a name="l00290"></a><a class="code" href="classMicrofacet.html#r0">00290</a>         <a class="code" href="classSpectrum.html">Spectrum</a> R;
<a name="l00291"></a><a class="code" href="classMicrofacet.html#r1">00291</a>         MicrofacetDistribution *distribution;
<a name="l00292"></a><a class="code" href="classMicrofacet.html#r2">00292</a>         Fresnel *fresnel;
00293 };
<a name="l00294"></a><a class="code" href="classBlinn.html">00294</a> <span class="keyword">class </span><a class="code" href="pbrt_8h.html#a1">COREDLL</a> Blinn : <span class="keyword">public</span> MicrofacetDistribution {
00295 <span class="keyword">public</span>:
<a name="l00296"></a><a class="code" href="classBlinn.html#a0">00296</a>         Blinn(<span class="keywordtype">float</span> e) { exponent = e; <span class="keywordflow">if</span> (e &gt; 1000.f || isnan(e)) e = 1000.f; }
00297         <span class="comment">// Blinn Public Methods</span>
<a name="l00298"></a><a class="code" href="classBlinn.html#a1">00298</a>         <span class="keywordtype">float</span> D(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wh)<span class="keyword"> const </span>{
00299                 <span class="keywordtype">float</span> costhetah = fabsf(<a class="code" href="reflection_8h.html#a11">CosTheta</a>(wh));
00300                 <span class="keywordflow">return</span> (exponent+2) *
00301                        <a class="code" href="pbrt_8h.html#a8">INV_TWOPI</a> *
00302                            powf(max(0.f, costhetah), exponent);
00303         }
00304         <span class="keyword">virtual</span> <span class="keywordtype">void</span> Sample_f(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wi, <a class="code" href="classVector.html">Vector</a> *sampled_f, <span class="keywordtype">float</span> u1, <span class="keywordtype">float</span> u2, <span class="keywordtype">float</span> *pdf) <span class="keyword">const</span>;
00305         <span class="keyword">virtual</span> <span class="keywordtype">float</span> Pdf(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wi, <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wo) <span class="keyword">const</span>;
00306 <span class="keyword">private</span>:
<a name="l00307"></a><a class="code" href="classBlinn.html#r0">00307</a>         <span class="keywordtype">float</span> exponent;
00308 };
<a name="l00309"></a><a class="code" href="classAnisotropic.html">00309</a> <span class="keyword">class </span><a class="code" href="pbrt_8h.html#a1">COREDLL</a> Anisotropic : <span class="keyword">public</span> MicrofacetDistribution {
00310 <span class="keyword">public</span>:
00311         <span class="comment">// Anisotropic Public Methods</span>
<a name="l00312"></a><a class="code" href="classAnisotropic.html#a0">00312</a>         Anisotropic(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y) { ex = x; ey = y;
00313                 <span class="keywordflow">if</span> (ex &gt; 1000.f || isnan(ex)) ex = 1000.f;
00314                 <span class="keywordflow">if</span> (ey &gt; 1000.f || isnan(ey)) ey = 1000.f;
00315         }
<a name="l00316"></a><a class="code" href="classAnisotropic.html#a1">00316</a>         <span class="keywordtype">float</span> D(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wh)<span class="keyword"> const </span>{
00317                 <span class="keywordtype">float</span> costhetah = fabsf(<a class="code" href="reflection_8h.html#a11">CosTheta</a>(wh));
00318                 <span class="keywordtype">float</span> e = (ex * wh.<a class="code" href="classVector.html#o0">x</a> * wh.<a class="code" href="classVector.html#o0">x</a> + ey * wh.<a class="code" href="classVector.html#o1">y</a> * wh.<a class="code" href="classVector.html#o1">y</a>) /
00319                         (1.f - costhetah * costhetah);
00320                 <span class="keywordflow">return</span> sqrtf((ex+2)*(ey+2)) * <a class="code" href="pbrt_8h.html#a8">INV_TWOPI</a> * powf(costhetah, e);
00321         }
00322         <span class="keywordtype">void</span> Sample_f(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wo, <a class="code" href="classVector.html">Vector</a> *wi, <span class="keywordtype">float</span> u1, <span class="keywordtype">float</span> u2, <span class="keywordtype">float</span> *pdf) <span class="keyword">const</span>;
00323         <span class="keywordtype">float</span> Pdf(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wo, <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wi) <span class="keyword">const</span>;
00324         <span class="keywordtype">void</span> sampleFirstQuadrant(<span class="keywordtype">float</span> u1, <span class="keywordtype">float</span> u2, <span class="keywordtype">float</span> *phi, <span class="keywordtype">float</span> *costheta) <span class="keyword">const</span>;
00325 <span class="keyword">private</span>:
<a name="l00326"></a><a class="code" href="classAnisotropic.html#r1">00326</a>         <span class="keywordtype">float</span> ex, ey;
00327 };
<a name="l00328"></a><a class="code" href="classLafortune.html">00328</a> <span class="keyword">class </span><a class="code" href="pbrt_8h.html#a1">COREDLL</a> Lafortune : <span class="keyword">public</span> BxDF {
00329 <span class="keyword">public</span>:
00330         <span class="comment">// Lafortune Public Methods</span>
00331         Lafortune(<span class="keyword">const</span> <a class="code" href="classSpectrum.html">Spectrum</a> &amp;r, <a class="code" href="pbrt_8h.html#a51">u_int</a> nl,
00332                   <span class="keyword">const</span> <a class="code" href="classSpectrum.html">Spectrum</a> *x, <span class="keyword">const</span> <a class="code" href="classSpectrum.html">Spectrum</a> *y, <span class="keyword">const</span> <a class="code" href="classSpectrum.html">Spectrum</a> *z,
00333                           <span class="keyword">const</span> <a class="code" href="classSpectrum.html">Spectrum</a> *e, <a class="code" href="reflection_8h.html#a17">BxDFType</a> t);
00334         <a class="code" href="classSpectrum.html">Spectrum</a> f(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wo, <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wi) <span class="keyword">const</span>;
00335         <a class="code" href="classSpectrum.html">Spectrum</a> Sample_f(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wi, <a class="code" href="classVector.html">Vector</a> *sampled_f,
00336                 <span class="keywordtype">float</span> u1, <span class="keywordtype">float</span> u2, <span class="keywordtype">float</span> *pdf) <span class="keyword">const</span>;
00337         <span class="keywordtype">float</span> Pdf(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wi, <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wo) <span class="keyword">const</span>;
00338 <span class="keyword">private</span>:
00339         <span class="comment">// Lafortune Private Data</span>
<a name="l00340"></a><a class="code" href="classLafortune.html#r0">00340</a>         <a class="code" href="classSpectrum.html">Spectrum</a> R;
<a name="l00341"></a><a class="code" href="classLafortune.html#r1">00341</a>         <a class="code" href="pbrt_8h.html#a51">u_int</a> nLobes;
<a name="l00342"></a><a class="code" href="classLafortune.html#r4">00342</a>         <span class="keyword">const</span> <a class="code" href="classSpectrum.html">Spectrum</a> *x, *y, *z, *exponent;
00343 };
<a name="l00344"></a><a class="code" href="classFresnelBlend.html">00344</a> <span class="keyword">class </span><a class="code" href="pbrt_8h.html#a1">COREDLL</a> FresnelBlend : <span class="keyword">public</span> BxDF {
00345 <span class="keyword">public</span>:
00346         <span class="comment">// FresnelBlend Public Methods</span>
00347         FresnelBlend(<span class="keyword">const</span> <a class="code" href="classSpectrum.html">Spectrum</a> &amp;Rd,
00348                      <span class="keyword">const</span> <a class="code" href="classSpectrum.html">Spectrum</a> &amp;Rs,
00349                                  MicrofacetDistribution *dist);
00350         <a class="code" href="classSpectrum.html">Spectrum</a> f(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wo, <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wi) <span class="keyword">const</span>;
<a name="l00351"></a><a class="code" href="classFresnelBlend.html#a2">00351</a>         <a class="code" href="classSpectrum.html">Spectrum</a> SchlickFresnel(<span class="keywordtype">float</span> costheta)<span class="keyword"> const </span>{
00352                 <span class="keywordflow">return</span>
00353                         Rs + powf(1 - costheta, 5.f) * (<a class="code" href="classSpectrum.html">Spectrum</a>(1.) - Rs);
00354         }
00355         <a class="code" href="classSpectrum.html">Spectrum</a> Sample_f(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wi, <a class="code" href="classVector.html">Vector</a> *sampled_f, <span class="keywordtype">float</span> u1, <span class="keywordtype">float</span> u2, <span class="keywordtype">float</span> *pdf) <span class="keyword">const</span>;
00356         <span class="keywordtype">float</span> Pdf(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wi, <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;wo) <span class="keyword">const</span>;
00357 <span class="keyword">private</span>:
00358         <span class="comment">// FresnelBlend Private Data</span>
<a name="l00359"></a><a class="code" href="classFresnelBlend.html#r1">00359</a>         <a class="code" href="classSpectrum.html">Spectrum</a> Rd, Rs;
<a name="l00360"></a><a class="code" href="classFresnelBlend.html#r2">00360</a>         MicrofacetDistribution *distribution;
00361 };
00362 <span class="comment">// BSDF Inline Method Definitions</span>
<a name="l00363"></a><a class="code" href="classBSDF.html#a4">00363</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classBSDF.html#a4">BSDF::Add</a>(BxDF *b) {
00364         <a class="code" href="pbrt_8h.html#a14">Assert</a>(<a class="code" href="classBSDF.html#r4">nBxDFs</a> &lt; <a class="code" href="reflection_8h.html#a0">MAX_BxDFS</a>);
00365         <a class="code" href="classBSDF.html#r5">bxdfs</a>[<a class="code" href="classBSDF.html#r4">nBxDFs</a>++] = b;
00366 }
<a name="l00367"></a><a class="code" href="classBSDF.html#a6">00367</a> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classBSDF.html#a5">BSDF::NumComponents</a>(BxDFType flags)<span class="keyword"> const </span>{
00368         <span class="keywordtype">int</span> num = 0;
00369         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classBSDF.html#r4">nBxDFs</a>; ++i)
00370                 <span class="keywordflow">if</span> (<a class="code" href="classBSDF.html#r5">bxdfs</a>[i]-&gt;<a class="code" href="classBxDF.html#a2">MatchesFlags</a>(flags)) ++num;
00371         <span class="keywordflow">return</span> num;
00372 }
00373 <span class="preprocessor">#endif // PBRT_REFLECTION_H</span>
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Mon Apr 25 19:00:24 2005 for pbrt by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>
