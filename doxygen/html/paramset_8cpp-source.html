<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>pbrt: paramset.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>paramset.cpp</h1><a href="paramset_8cpp.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 
00002 <span class="comment">/*</span>
00003 <span class="comment"> * pbrt source code Copyright(c) 1998-2005 Matt Pharr and Greg Humphreys</span>
00004 <span class="comment"> *</span>
00005 <span class="comment"> * All Rights Reserved.</span>
00006 <span class="comment"> * For educational use only; commercial use expressly forbidden.</span>
00007 <span class="comment"> * NO WARRANTY, express or implied, for this software.</span>
00008 <span class="comment"> * (See file License.txt for complete license)</span>
00009 <span class="comment"> */</span>
00010 
00011 <span class="comment">// paramset.cpp*</span>
00012 <span class="preprocessor">#include "<a class="code" href="paramset_8h.html">paramset.h</a>"</span>
00013 <span class="comment">// ParamSet Methods</span>
<a name="l00014"></a><a class="code" href="classParamSet.html#a2">00014</a> <a class="code" href="classParamSet.html#a0">ParamSet::ParamSet</a>(<span class="keyword">const</span> <a class="code" href="classParamSet.html">ParamSet</a> &amp;p2) {
00015         *<span class="keyword">this</span> = p2;
00016 }
<a name="l00017"></a><a class="code" href="classParamSet.html#a1">00017</a> <a class="code" href="classParamSet.html">ParamSet</a> &amp;<a class="code" href="classParamSet.html#a1">ParamSet::operator=</a>(<span class="keyword">const</span> <a class="code" href="classParamSet.html">ParamSet</a> &amp;p2) {
00018         <span class="keywordflow">if</span> (&amp;p2 != <span class="keyword">this</span>) {
00019                 <a class="code" href="classParamSet.html#a40">Clear</a>();
00020                 <a class="code" href="pbrt_8h.html#a51">u_int</a> i;
00021                 <span class="keywordflow">for</span> (i = 0; i &lt; p2.<a class="code" href="classParamSet.html#r0">ints</a>.size(); ++i)
00022                         <a class="code" href="classParamSet.html#r0">ints</a>.push_back(p2.<a class="code" href="classParamSet.html#r0">ints</a>[i]-&gt;Clone());
00023                 <span class="keywordflow">for</span> (i = 0; i &lt; p2.<a class="code" href="classParamSet.html#r1">bools</a>.size(); ++i)
00024                         <a class="code" href="classParamSet.html#r1">bools</a>.push_back(p2.<a class="code" href="classParamSet.html#r1">bools</a>[i]-&gt;Clone());
00025                 <span class="keywordflow">for</span> (i = 0; i &lt; p2.<a class="code" href="classParamSet.html#r2">floats</a>.size(); ++i)
00026                         <a class="code" href="classParamSet.html#r2">floats</a>.push_back(p2.<a class="code" href="classParamSet.html#r2">floats</a>[i]-&gt;Clone());
00027                 <span class="keywordflow">for</span> (i = 0; i &lt; p2.<a class="code" href="classParamSet.html#r3">points</a>.size(); ++i)
00028                         <a class="code" href="classParamSet.html#r3">points</a>.push_back(p2.<a class="code" href="classParamSet.html#r3">points</a>[i]-&gt;Clone());
00029                 <span class="keywordflow">for</span> (i = 0; i &lt; p2.<a class="code" href="classParamSet.html#r4">vectors</a>.size(); ++i)
00030                         <a class="code" href="classParamSet.html#r4">vectors</a>.push_back(p2.<a class="code" href="classParamSet.html#r4">vectors</a>[i]-&gt;Clone());
00031                 <span class="keywordflow">for</span> (i = 0; i &lt; p2.<a class="code" href="classParamSet.html#r5">normals</a>.size(); ++i)
00032                         <a class="code" href="classParamSet.html#r5">normals</a>.push_back(p2.<a class="code" href="classParamSet.html#r5">normals</a>[i]-&gt;Clone());
00033                 <span class="keywordflow">for</span> (i = 0; i &lt; p2.<a class="code" href="classParamSet.html#r6">spectra</a>.size(); ++i)
00034                         <a class="code" href="classParamSet.html#r6">spectra</a>.push_back(p2.<a class="code" href="classParamSet.html#r6">spectra</a>[i]-&gt;Clone());
00035                 <span class="keywordflow">for</span> (i = 0; i &lt; p2.<a class="code" href="classParamSet.html#r7">strings</a>.size(); ++i)
00036                         <a class="code" href="classParamSet.html#r7">strings</a>.push_back(p2.<a class="code" href="classParamSet.html#r7">strings</a>[i]-&gt;Clone());
00037                 <span class="keywordflow">for</span> (i = 0; i &lt; p2.<a class="code" href="classParamSet.html#r8">textures</a>.size(); ++i)
00038                         <a class="code" href="classParamSet.html#r8">textures</a>.push_back(p2.<a class="code" href="classParamSet.html#r8">textures</a>[i]-&gt;Clone());
00039         }
00040         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00041 }
<a name="l00042"></a><a class="code" href="classParamSet.html#a3">00042</a> <span class="keywordtype">void</span> <a class="code" href="classParamSet.html#a3">ParamSet::AddFloat</a>(<span class="keyword">const</span> string &amp;name,
00043                                     <span class="keyword">const</span> <span class="keywordtype">float</span> *data,
00044                                                 <span class="keywordtype">int</span> nItems) {
00045         <a class="code" href="classParamSet.html#a14">EraseFloat</a>(name);
00046         <a class="code" href="classParamSet.html#r2">floats</a>.push_back(<span class="keyword">new</span> <a class="code" href="structParamSetItem.html">ParamSetItem&lt;float&gt;</a>(name,
00047                                                                                          data,
00048                                                                                          nItems));
00049 }
<a name="l00050"></a><a class="code" href="classParamSet.html#a4">00050</a> <span class="keywordtype">void</span> <a class="code" href="classParamSet.html#a4">ParamSet::AddInt</a>(<span class="keyword">const</span> string &amp;name, <span class="keyword">const</span> <span class="keywordtype">int</span> *data, <span class="keywordtype">int</span> nItems) {
00051         <a class="code" href="classParamSet.html#a12">EraseInt</a>(name);
00052         <a class="code" href="paramset_8h.html#a0">ADD_PARAM_TYPE</a>(<span class="keywordtype">int</span>, <a class="code" href="classParamSet.html#r0">ints</a>);
00053 }
<a name="l00054"></a><a class="code" href="classParamSet.html#a5">00054</a> <span class="keywordtype">void</span> <a class="code" href="classParamSet.html#a5">ParamSet::AddBool</a>(<span class="keyword">const</span> string &amp;name, <span class="keyword">const</span> <span class="keywordtype">bool</span> *data, <span class="keywordtype">int</span> nItems) {
00055         <a class="code" href="classParamSet.html#a12">EraseInt</a>(name);
00056         <a class="code" href="paramset_8h.html#a0">ADD_PARAM_TYPE</a>(<span class="keywordtype">bool</span>, <a class="code" href="classParamSet.html#r1">bools</a>);
00057 }
<a name="l00058"></a><a class="code" href="classParamSet.html#a6">00058</a> <span class="keywordtype">void</span> <a class="code" href="classParamSet.html#a6">ParamSet::AddPoint</a>(<span class="keyword">const</span> string &amp;name, <span class="keyword">const</span> <a class="code" href="classPoint.html">Point</a> *data, <span class="keywordtype">int</span> nItems) {
00059         <a class="code" href="classParamSet.html#a15">ErasePoint</a>(name);
00060         <a class="code" href="paramset_8h.html#a0">ADD_PARAM_TYPE</a>(<a class="code" href="classPoint.html">Point</a>, <a class="code" href="classParamSet.html#r3">points</a>);
00061 }
<a name="l00062"></a><a class="code" href="classParamSet.html#a7">00062</a> <span class="keywordtype">void</span> <a class="code" href="classParamSet.html#a7">ParamSet::AddVector</a>(<span class="keyword">const</span> string &amp;name, <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> *data, <span class="keywordtype">int</span> nItems) {
00063         <a class="code" href="classParamSet.html#a16">EraseVector</a>(name);
00064         <a class="code" href="paramset_8h.html#a0">ADD_PARAM_TYPE</a>(<a class="code" href="classVector.html">Vector</a>, <a class="code" href="classParamSet.html#r4">vectors</a>);
00065 }
<a name="l00066"></a><a class="code" href="classParamSet.html#a8">00066</a> <span class="keywordtype">void</span> <a class="code" href="classParamSet.html#a8">ParamSet::AddNormal</a>(<span class="keyword">const</span> string &amp;name, <span class="keyword">const</span> <a class="code" href="classNormal.html">Normal</a> *data, <span class="keywordtype">int</span> nItems) {
00067         <a class="code" href="classParamSet.html#a17">EraseNormal</a>(name);
00068         <a class="code" href="paramset_8h.html#a0">ADD_PARAM_TYPE</a>(<a class="code" href="classNormal.html">Normal</a>, <a class="code" href="classParamSet.html#r5">normals</a>);
00069 }
<a name="l00070"></a><a class="code" href="classParamSet.html#a9">00070</a> <span class="keywordtype">void</span> <a class="code" href="classParamSet.html#a9">ParamSet::AddSpectrum</a>(<span class="keyword">const</span> string &amp;name, <span class="keyword">const</span> <a class="code" href="classSpectrum.html">Spectrum</a> *data, <span class="keywordtype">int</span> nItems) {
00071         <a class="code" href="classParamSet.html#a18">EraseSpectrum</a>(name);
00072         <a class="code" href="paramset_8h.html#a0">ADD_PARAM_TYPE</a>(<a class="code" href="classSpectrum.html">Spectrum</a>, <a class="code" href="classParamSet.html#r6">spectra</a>);
00073 }
<a name="l00074"></a><a class="code" href="classParamSet.html#a10">00074</a> <span class="keywordtype">void</span> <a class="code" href="classParamSet.html#a10">ParamSet::AddString</a>(<span class="keyword">const</span> string &amp;name, <span class="keyword">const</span> string *data, <span class="keywordtype">int</span> nItems) {
00075         <a class="code" href="classParamSet.html#a19">EraseString</a>(name);
00076         <a class="code" href="paramset_8h.html#a0">ADD_PARAM_TYPE</a>(string, <a class="code" href="classParamSet.html#r7">strings</a>);
00077 }
<a name="l00078"></a><a class="code" href="classParamSet.html#a11">00078</a> <span class="keywordtype">void</span> <a class="code" href="classParamSet.html#a11">ParamSet::AddTexture</a>(<span class="keyword">const</span> string &amp;name, <span class="keyword">const</span> string &amp;value) {
00079         <a class="code" href="classParamSet.html#a20">EraseTexture</a>(name);
00080         <a class="code" href="classParamSet.html#r8">textures</a>.push_back(<span class="keyword">new</span> <a class="code" href="structParamSetItem.html">ParamSetItem&lt;string&gt;</a>(name, (string *)&amp;value, 1));
00081 }
<a name="l00082"></a><a class="code" href="classParamSet.html#a12">00082</a> <span class="keywordtype">bool</span> <a class="code" href="classParamSet.html#a12">ParamSet::EraseInt</a>(<span class="keyword">const</span> string &amp;n) {
00083         <span class="keywordflow">for</span> (<a class="code" href="pbrt_8h.html#a51">u_int</a> i = 0; i &lt; <a class="code" href="classParamSet.html#r0">ints</a>.size(); ++i)
00084                 <span class="keywordflow">if</span> (<a class="code" href="classParamSet.html#r0">ints</a>[i]-&gt;name == n) {
00085                         <a class="code" href="classParamSet.html#r0">ints</a>.erase(<a class="code" href="classParamSet.html#r0">ints</a>.begin() + i);
00086                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00087                 }
00088         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00089 }
<a name="l00090"></a><a class="code" href="classParamSet.html#a13">00090</a> <span class="keywordtype">bool</span> <a class="code" href="classParamSet.html#a13">ParamSet::EraseBool</a>(<span class="keyword">const</span> string &amp;n) {
00091         <span class="keywordflow">for</span> (<a class="code" href="pbrt_8h.html#a51">u_int</a> i = 0; i &lt; <a class="code" href="classParamSet.html#r1">bools</a>.size(); ++i)
00092                 <span class="keywordflow">if</span> (<a class="code" href="classParamSet.html#r1">bools</a>[i]-&gt;name == n) {
00093                         <a class="code" href="classParamSet.html#r1">bools</a>.erase(<a class="code" href="classParamSet.html#r1">bools</a>.begin() + i);
00094                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00095                 }
00096         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00097 }
<a name="l00098"></a><a class="code" href="classParamSet.html#a14">00098</a> <span class="keywordtype">bool</span> <a class="code" href="classParamSet.html#a14">ParamSet::EraseFloat</a>(<span class="keyword">const</span> string &amp;n) {
00099         <span class="keywordflow">for</span> (<a class="code" href="pbrt_8h.html#a51">u_int</a> i = 0; i &lt; <a class="code" href="classParamSet.html#r2">floats</a>.size(); ++i)
00100                 <span class="keywordflow">if</span> (<a class="code" href="classParamSet.html#r2">floats</a>[i]-&gt;name == n) {
00101                         <a class="code" href="classParamSet.html#r2">floats</a>.erase(<a class="code" href="classParamSet.html#r2">floats</a>.begin() + i);
00102                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00103                 }
00104         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00105 }
<a name="l00106"></a><a class="code" href="classParamSet.html#a15">00106</a> <span class="keywordtype">bool</span> <a class="code" href="classParamSet.html#a15">ParamSet::ErasePoint</a>(<span class="keyword">const</span> string &amp;n) {
00107         <span class="keywordflow">for</span> (<a class="code" href="pbrt_8h.html#a51">u_int</a> i = 0; i &lt; <a class="code" href="classParamSet.html#r3">points</a>.size(); ++i)
00108                 <span class="keywordflow">if</span> (<a class="code" href="classParamSet.html#r3">points</a>[i]-&gt;name == n) {
00109                         <a class="code" href="classParamSet.html#r3">points</a>.erase(<a class="code" href="classParamSet.html#r3">points</a>.begin() + i);
00110                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00111                 }
00112         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00113 }
<a name="l00114"></a><a class="code" href="classParamSet.html#a16">00114</a> <span class="keywordtype">bool</span> <a class="code" href="classParamSet.html#a16">ParamSet::EraseVector</a>(<span class="keyword">const</span> string &amp;n) {
00115         <span class="keywordflow">for</span> (<a class="code" href="pbrt_8h.html#a51">u_int</a> i = 0; i &lt; <a class="code" href="classParamSet.html#r4">vectors</a>.size(); ++i)
00116                 <span class="keywordflow">if</span> (<a class="code" href="classParamSet.html#r4">vectors</a>[i]-&gt;name == n) {
00117                         <a class="code" href="classParamSet.html#r4">vectors</a>.erase(<a class="code" href="classParamSet.html#r4">vectors</a>.begin() + i);
00118                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00119                 }
00120         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00121 }
<a name="l00122"></a><a class="code" href="classParamSet.html#a17">00122</a> <span class="keywordtype">bool</span> <a class="code" href="classParamSet.html#a17">ParamSet::EraseNormal</a>(<span class="keyword">const</span> string &amp;n) {
00123         <span class="keywordflow">for</span> (<a class="code" href="pbrt_8h.html#a51">u_int</a> i = 0; i &lt; <a class="code" href="classParamSet.html#r5">normals</a>.size(); ++i)
00124                 <span class="keywordflow">if</span> (<a class="code" href="classParamSet.html#r5">normals</a>[i]-&gt;name == n) {
00125                         <a class="code" href="classParamSet.html#r5">normals</a>.erase(<a class="code" href="classParamSet.html#r5">normals</a>.begin() + i);
00126                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00127                 }
00128         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00129 }
<a name="l00130"></a><a class="code" href="classParamSet.html#a18">00130</a> <span class="keywordtype">bool</span> <a class="code" href="classParamSet.html#a18">ParamSet::EraseSpectrum</a>(<span class="keyword">const</span> string &amp;n) {
00131         <span class="keywordflow">for</span> (<a class="code" href="pbrt_8h.html#a51">u_int</a> i = 0; i &lt; <a class="code" href="classParamSet.html#r6">spectra</a>.size(); ++i)
00132                 <span class="keywordflow">if</span> (<a class="code" href="classParamSet.html#r6">spectra</a>[i]-&gt;name == n) {
00133                         <a class="code" href="classParamSet.html#r6">spectra</a>.erase(<a class="code" href="classParamSet.html#r6">spectra</a>.begin() + i);
00134                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00135                 }
00136         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00137 }
<a name="l00138"></a><a class="code" href="classParamSet.html#a19">00138</a> <span class="keywordtype">bool</span> <a class="code" href="classParamSet.html#a19">ParamSet::EraseString</a>(<span class="keyword">const</span> string &amp;n) {
00139         <span class="keywordflow">for</span> (<a class="code" href="pbrt_8h.html#a51">u_int</a> i = 0; i &lt; <a class="code" href="classParamSet.html#r7">strings</a>.size(); ++i)
00140                 <span class="keywordflow">if</span> (<a class="code" href="classParamSet.html#r7">strings</a>[i]-&gt;name == n) {
00141                         <a class="code" href="classParamSet.html#r7">strings</a>.erase(<a class="code" href="classParamSet.html#r7">strings</a>.begin() + i);
00142                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00143                 }
00144         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00145 }
<a name="l00146"></a><a class="code" href="classParamSet.html#a20">00146</a> <span class="keywordtype">bool</span> <a class="code" href="classParamSet.html#a20">ParamSet::EraseTexture</a>(<span class="keyword">const</span> string &amp;n) {
00147         <span class="keywordflow">for</span> (<a class="code" href="pbrt_8h.html#a51">u_int</a> i = 0; i &lt; <a class="code" href="classParamSet.html#r8">textures</a>.size(); ++i)
00148                 <span class="keywordflow">if</span> (<a class="code" href="classParamSet.html#r8">textures</a>[i]-&gt;name == n) {
00149                         <a class="code" href="classParamSet.html#r8">textures</a>.erase(<a class="code" href="classParamSet.html#r8">textures</a>.begin() + i);
00150                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00151                 }
00152         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00153 }
<a name="l00154"></a><a class="code" href="classParamSet.html#a21">00154</a> <span class="keywordtype">float</span> <a class="code" href="classParamSet.html#a21">ParamSet::FindOneFloat</a>(<span class="keyword">const</span> string &amp;name,
00155                              <span class="keywordtype">float</span> d)<span class="keyword"> const </span>{
00156         <span class="keywordflow">for</span> (<a class="code" href="pbrt_8h.html#a51">u_int</a> i = 0; i &lt; <a class="code" href="classParamSet.html#r2">floats</a>.size(); ++i)
00157                 <span class="keywordflow">if</span> (<a class="code" href="classParamSet.html#r2">floats</a>[i]-&gt;name == name &amp;&amp;
00158                         <a class="code" href="classParamSet.html#r2">floats</a>[i]-&gt;nItems == 1) {
00159                         floats[i]-&gt;lookedUp = <span class="keyword">true</span>;
00160                         <span class="keywordflow">return</span> *(floats[i]-&gt;data);
00161                 }
00162         <span class="keywordflow">return</span> d;
00163 }
<a name="l00164"></a><a class="code" href="classParamSet.html#a30">00164</a> <span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code" href="classParamSet.html#a30">ParamSet::FindFloat</a>(<span class="keyword">const</span> string &amp;name,
00165                 <span class="keywordtype">int</span> *nItems)<span class="keyword"> const </span>{
00166         <span class="keywordflow">for</span> (<a class="code" href="pbrt_8h.html#a51">u_int</a> i = 0; i &lt; <a class="code" href="classParamSet.html#r2">floats</a>.size(); ++i)
00167                 <span class="keywordflow">if</span> (<a class="code" href="classParamSet.html#r2">floats</a>[i]-&gt;name == name) {
00168                         *nItems = <a class="code" href="classParamSet.html#r2">floats</a>[i]-&gt;nItems;
00169                         floats[i]-&gt;lookedUp = <span class="keyword">true</span>;
00170                         <span class="keywordflow">return</span> floats[i]-&gt;data;
00171                 }
00172         <span class="keywordflow">return</span> NULL;
00173 }
<a name="l00174"></a><a class="code" href="classParamSet.html#a31">00174</a> <span class="keyword">const</span> <span class="keywordtype">int</span> *<a class="code" href="classParamSet.html#a31">ParamSet::FindInt</a>(<span class="keyword">const</span> string &amp;name, <span class="keywordtype">int</span> *nItems)<span class="keyword"> const </span>{
00175         <a class="code" href="paramset_8h.html#a1">LOOKUP_PTR</a>(<a class="code" href="classParamSet.html#r0">ints</a>);
00176 }
<a name="l00177"></a><a class="code" href="classParamSet.html#a32">00177</a> <span class="keyword">const</span> <span class="keywordtype">bool</span> *<a class="code" href="classParamSet.html#a32">ParamSet::FindBool</a>(<span class="keyword">const</span> string &amp;name, <span class="keywordtype">int</span> *nItems)<span class="keyword"> const </span>{
00178         <a class="code" href="paramset_8h.html#a1">LOOKUP_PTR</a>(<a class="code" href="classParamSet.html#r1">bools</a>);
00179 }
<a name="l00180"></a><a class="code" href="classParamSet.html#a22">00180</a> <span class="keywordtype">int</span> <a class="code" href="classParamSet.html#a22">ParamSet::FindOneInt</a>(<span class="keyword">const</span> string &amp;name, <span class="keywordtype">int</span> d)<span class="keyword"> const </span>{
00181         <a class="code" href="paramset_8h.html#a2">LOOKUP_ONE</a>(<a class="code" href="classParamSet.html#r0">ints</a>);
00182 }
<a name="l00183"></a><a class="code" href="classParamSet.html#a23">00183</a> <span class="keywordtype">bool</span> <a class="code" href="classParamSet.html#a23">ParamSet::FindOneBool</a>(<span class="keyword">const</span> string &amp;name, <span class="keywordtype">bool</span> d)<span class="keyword"> const </span>{
00184         <a class="code" href="paramset_8h.html#a2">LOOKUP_ONE</a>(<a class="code" href="classParamSet.html#r1">bools</a>);
00185 }
<a name="l00186"></a><a class="code" href="classParamSet.html#a33">00186</a> <span class="keyword">const</span> <a class="code" href="classPoint.html">Point</a> *<a class="code" href="classParamSet.html#a33">ParamSet::FindPoint</a>(<span class="keyword">const</span> string &amp;name, <span class="keywordtype">int</span> *nItems)<span class="keyword"> const </span>{
00187         <a class="code" href="paramset_8h.html#a1">LOOKUP_PTR</a>(<a class="code" href="classParamSet.html#r3">points</a>);
00188 }
<a name="l00189"></a><a class="code" href="classParamSet.html#a24">00189</a> <a class="code" href="classPoint.html">Point</a> <a class="code" href="classParamSet.html#a24">ParamSet::FindOnePoint</a>(<span class="keyword">const</span> string &amp;name, <span class="keyword">const</span> <a class="code" href="classPoint.html">Point</a> &amp;d)<span class="keyword"> const </span>{
00190         <a class="code" href="paramset_8h.html#a2">LOOKUP_ONE</a>(<a class="code" href="classParamSet.html#r3">points</a>);
00191 }
<a name="l00192"></a><a class="code" href="classParamSet.html#a34">00192</a> <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> *<a class="code" href="classParamSet.html#a34">ParamSet::FindVector</a>(<span class="keyword">const</span> string &amp;name, <span class="keywordtype">int</span> *nItems)<span class="keyword"> const </span>{
00193         <a class="code" href="paramset_8h.html#a1">LOOKUP_PTR</a>(<a class="code" href="classParamSet.html#r4">vectors</a>);
00194 }
<a name="l00195"></a><a class="code" href="classParamSet.html#a25">00195</a> <a class="code" href="classVector.html">Vector</a> <a class="code" href="classParamSet.html#a25">ParamSet::FindOneVector</a>(<span class="keyword">const</span> string &amp;name, <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> &amp;d)<span class="keyword"> const </span>{
00196         <a class="code" href="paramset_8h.html#a2">LOOKUP_ONE</a>(<a class="code" href="classParamSet.html#r4">vectors</a>);
00197 }
<a name="l00198"></a><a class="code" href="classParamSet.html#a35">00198</a> <span class="keyword">const</span> <a class="code" href="classNormal.html">Normal</a> *<a class="code" href="classParamSet.html#a35">ParamSet::FindNormal</a>(<span class="keyword">const</span> string &amp;name, <span class="keywordtype">int</span> *nItems)<span class="keyword"> const </span>{
00199         <a class="code" href="paramset_8h.html#a1">LOOKUP_PTR</a>(<a class="code" href="classParamSet.html#r5">normals</a>);
00200 }
<a name="l00201"></a><a class="code" href="classParamSet.html#a26">00201</a> <a class="code" href="classNormal.html">Normal</a> <a class="code" href="classParamSet.html#a26">ParamSet::FindOneNormal</a>(<span class="keyword">const</span> string &amp;name, <span class="keyword">const</span> <a class="code" href="classNormal.html">Normal</a> &amp;d)<span class="keyword"> const </span>{
00202         <a class="code" href="paramset_8h.html#a2">LOOKUP_ONE</a>(<a class="code" href="classParamSet.html#r5">normals</a>);
00203 }
<a name="l00204"></a><a class="code" href="classParamSet.html#a36">00204</a> <span class="keyword">const</span> <a class="code" href="classSpectrum.html">Spectrum</a> *<a class="code" href="classParamSet.html#a36">ParamSet::FindSpectrum</a>(<span class="keyword">const</span> string &amp;name, <span class="keywordtype">int</span> *nItems)<span class="keyword"> const </span>{
00205         <a class="code" href="paramset_8h.html#a1">LOOKUP_PTR</a>(<a class="code" href="classParamSet.html#r6">spectra</a>);
00206 }
<a name="l00207"></a><a class="code" href="classParamSet.html#a27">00207</a> <a class="code" href="classSpectrum.html">Spectrum</a> <a class="code" href="classParamSet.html#a27">ParamSet::FindOneSpectrum</a>(<span class="keyword">const</span> string &amp;name, <span class="keyword">const</span> <a class="code" href="classSpectrum.html">Spectrum</a> &amp;d)<span class="keyword"> const </span>{
00208         <a class="code" href="paramset_8h.html#a2">LOOKUP_ONE</a>(<a class="code" href="classParamSet.html#r6">spectra</a>);
00209 }
<a name="l00210"></a><a class="code" href="classParamSet.html#a37">00210</a> <span class="keyword">const</span> string *<a class="code" href="classParamSet.html#a37">ParamSet::FindString</a>(<span class="keyword">const</span> string &amp;name, <span class="keywordtype">int</span> *nItems)<span class="keyword"> const </span>{
00211         <a class="code" href="paramset_8h.html#a1">LOOKUP_PTR</a>(<a class="code" href="classParamSet.html#r7">strings</a>);
00212 }
<a name="l00213"></a><a class="code" href="classParamSet.html#a28">00213</a> string <a class="code" href="classParamSet.html#a28">ParamSet::FindOneString</a>(<span class="keyword">const</span> string &amp;name, <span class="keyword">const</span> string &amp;d)<span class="keyword"> const </span>{
00214         <a class="code" href="paramset_8h.html#a2">LOOKUP_ONE</a>(<a class="code" href="classParamSet.html#r7">strings</a>);
00215 }
<a name="l00216"></a><a class="code" href="classParamSet.html#a29">00216</a> string <a class="code" href="classParamSet.html#a29">ParamSet::FindTexture</a>(<span class="keyword">const</span> string &amp;name)<span class="keyword"> const </span>{
00217         string d = <span class="stringliteral">""</span>;
00218         <a class="code" href="paramset_8h.html#a2">LOOKUP_ONE</a>(<a class="code" href="classParamSet.html#r8">textures</a>);
00219 }
<a name="l00220"></a><a class="code" href="classParamSet.html#a38">00220</a> <span class="keywordtype">void</span> <a class="code" href="classParamSet.html#a38">ParamSet::ReportUnused</a>()<span class="keyword"> const </span>{
00221 <span class="preprocessor">#define CHECK_UNUSED(v) \</span>
00222 <span class="preprocessor">        for (i = 0; i &lt; (v).size(); ++i) \</span>
00223 <span class="preprocessor">                if (!(v)[i]-&gt;lookedUp) \</span>
00224 <span class="preprocessor">                        Warning("Parameter \"%s\" not used", \</span>
00225 <span class="preprocessor">                                (v)[i]-&gt;name.c_str())</span>
00226 <span class="preprocessor"></span>        <a class="code" href="pbrt_8h.html#a51">u_int</a> i;
00227         <a class="code" href="paramset_8cpp.html#a0">CHECK_UNUSED</a>(<a class="code" href="classParamSet.html#r0">ints</a>);       <a class="code" href="paramset_8cpp.html#a0">CHECK_UNUSED</a>(<a class="code" href="classParamSet.html#r1">bools</a>);
00228         <a class="code" href="paramset_8cpp.html#a0">CHECK_UNUSED</a>(<a class="code" href="classParamSet.html#r2">floats</a>);   <a class="code" href="paramset_8cpp.html#a0">CHECK_UNUSED</a>(<a class="code" href="classParamSet.html#r3">points</a>);
00229         <a class="code" href="paramset_8cpp.html#a0">CHECK_UNUSED</a>(<a class="code" href="classParamSet.html#r4">vectors</a>); <a class="code" href="paramset_8cpp.html#a0">CHECK_UNUSED</a>(<a class="code" href="classParamSet.html#r5">normals</a>);
00230         <a class="code" href="paramset_8cpp.html#a0">CHECK_UNUSED</a>(<a class="code" href="classParamSet.html#r6">spectra</a>); <a class="code" href="paramset_8cpp.html#a0">CHECK_UNUSED</a>(<a class="code" href="classParamSet.html#r7">strings</a>);
00231         <a class="code" href="paramset_8cpp.html#a0">CHECK_UNUSED</a>(<a class="code" href="classParamSet.html#r8">textures</a>);
00232 }
<a name="l00233"></a><a class="code" href="classParamSet.html#a40">00233</a> <span class="keywordtype">void</span> <a class="code" href="classParamSet.html#a40">ParamSet::Clear</a>() {
00234 <span class="preprocessor">#define DEL_PARAMS(name) \</span>
00235 <span class="preprocessor">        for (u_int i = 0; i &lt; (name).size(); ++i) \</span>
00236 <span class="preprocessor">                delete (name)[i]; \</span>
00237 <span class="preprocessor">        (name).erase((name).begin(), (name).end())</span>
00238 <span class="preprocessor"></span>        <a class="code" href="paramset_8cpp.html#a1">DEL_PARAMS</a>(<a class="code" href="classParamSet.html#r0">ints</a>);    <a class="code" href="paramset_8cpp.html#a1">DEL_PARAMS</a>(<a class="code" href="classParamSet.html#r1">bools</a>);
00239         <a class="code" href="paramset_8cpp.html#a1">DEL_PARAMS</a>(<a class="code" href="classParamSet.html#r2">floats</a>);  <a class="code" href="paramset_8cpp.html#a1">DEL_PARAMS</a>(<a class="code" href="classParamSet.html#r3">points</a>);
00240         <a class="code" href="paramset_8cpp.html#a1">DEL_PARAMS</a>(<a class="code" href="classParamSet.html#r4">vectors</a>); <a class="code" href="paramset_8cpp.html#a1">DEL_PARAMS</a>(<a class="code" href="classParamSet.html#r5">normals</a>);
00241         <a class="code" href="paramset_8cpp.html#a1">DEL_PARAMS</a>(<a class="code" href="classParamSet.html#r6">spectra</a>); <a class="code" href="paramset_8cpp.html#a1">DEL_PARAMS</a>(<a class="code" href="classParamSet.html#r7">strings</a>);
00242         <a class="code" href="paramset_8cpp.html#a1">DEL_PARAMS</a>(<a class="code" href="classParamSet.html#r8">textures</a>);
00243 <span class="preprocessor">#undef DEL_PARAMS</span>
00244 <span class="preprocessor"></span>}
<a name="l00245"></a><a class="code" href="classParamSet.html#a41">00245</a> string <a class="code" href="classParamSet.html#a41">ParamSet::ToString</a>()<span class="keyword"> const </span>{
00246         string ret;
00247         <a class="code" href="pbrt_8h.html#a51">u_int</a> i;
00248         <span class="keywordtype">int</span> j;
00249         string typeString;
00250         <span class="keyword">static</span> <span class="keywordtype">char</span> *buf = <span class="keyword">new</span> <span class="keywordtype">char</span>[48*1024*1024];
00251         <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="classParamSet.html#r0">ints</a>.size(); ++i) {
00252                 <span class="keywordtype">char</span> *bufp = buf;
00253                 <a class="code" href="structParamSetItem.html">ParamSetItem&lt;int&gt;</a> *item = <a class="code" href="classParamSet.html#r0">ints</a>[i];
00254                 typeString = <span class="stringliteral">"integer "</span>;
00255                 <span class="comment">// Print _ParamSetItem_ declaration, determine how many to print</span>
00256                 <span class="keywordtype">int</span> nPrint = item-&gt;<a class="code" href="structParamSetItem.html#o1">nItems</a>;
00257                 ret += string(<span class="stringliteral">"\""</span>);
00258                 ret += typeString;
00259                 ret += item-&gt;<a class="code" href="structParamSetItem.html#o0">name</a>;
00260                 ret += string(<span class="stringliteral">"\""</span>);
00261                 ret += string(<span class="stringliteral">" ["</span>);
00262                 <span class="keywordflow">for</span> (j = 0; j &lt; nPrint; ++j)
00263                         bufp += sprintf(bufp, <span class="stringliteral">"%d "</span>, item-&gt;<a class="code" href="structParamSetItem.html#o2">data</a>[j]);
00264                 ret += buf;
00265                 ret += string(<span class="stringliteral">"] "</span>);
00266         }
00267         <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="classParamSet.html#r1">bools</a>.size(); ++i) {
00268                 <span class="keywordtype">char</span> *bufp = buf;
00269                 <a class="code" href="structParamSetItem.html">ParamSetItem&lt;bool&gt;</a> *item = <a class="code" href="classParamSet.html#r1">bools</a>[i];
00270                 typeString = <span class="stringliteral">"bool "</span>;
00271                 <span class="comment">// Print _ParamSetItem_ declaration, determine how many to print</span>
00272                 <span class="keywordtype">int</span> nPrint = item-&gt;<a class="code" href="structParamSetItem.html#o1">nItems</a>;
00273                 ret += string(<span class="stringliteral">"\""</span>);
00274                 ret += typeString;
00275                 ret += item-&gt;<a class="code" href="structParamSetItem.html#o0">name</a>;
00276                 ret += string(<span class="stringliteral">"\""</span>);
00277                 ret += string(<span class="stringliteral">" ["</span>);
00278                 <span class="keywordflow">for</span> (j = 0; j &lt; nPrint; ++j)
00279                         bufp += sprintf(bufp, <span class="stringliteral">"\"%s\" "</span>, item-&gt;<a class="code" href="structParamSetItem.html#o2">data</a>[j] ? <span class="stringliteral">"true"</span> : <span class="stringliteral">"false"</span>);
00280                 ret += buf;
00281                 ret += string(<span class="stringliteral">"] "</span>);
00282         }
00283         <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="classParamSet.html#r2">floats</a>.size(); ++i) {
00284                 <span class="keywordtype">char</span> *bufp = buf;
00285                 <a class="code" href="structParamSetItem.html">ParamSetItem&lt;float&gt;</a> *item = <a class="code" href="classParamSet.html#r2">floats</a>[i];
00286                 typeString = <span class="stringliteral">"float "</span>;
00287                 <span class="comment">// Print _ParamSetItem_ declaration, determine how many to print</span>
00288                 <span class="keywordtype">int</span> nPrint = item-&gt;<a class="code" href="structParamSetItem.html#o1">nItems</a>;
00289                 ret += string(<span class="stringliteral">"\""</span>);
00290                 ret += typeString;
00291                 ret += item-&gt;<a class="code" href="structParamSetItem.html#o0">name</a>;
00292                 ret += string(<span class="stringliteral">"\""</span>);
00293                 ret += string(<span class="stringliteral">" ["</span>);
00294                 <span class="keywordflow">for</span> (j = 0; j &lt; nPrint; ++j)
00295                         bufp += sprintf(bufp, <span class="stringliteral">"%.8g "</span>, item-&gt;<a class="code" href="structParamSetItem.html#o2">data</a>[j]);
00296                 ret += buf;
00297                 ret += string(<span class="stringliteral">"] "</span>);
00298         }
00299         <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="classParamSet.html#r3">points</a>.size(); ++i) {
00300                 <span class="keywordtype">char</span> *bufp = buf;
00301                 <a class="code" href="structParamSetItem.html">ParamSetItem&lt;Point&gt;</a> *item = <a class="code" href="classParamSet.html#r3">points</a>[i];
00302                 typeString = <span class="stringliteral">"point "</span>;
00303                 <span class="comment">// Print _ParamSetItem_ declaration, determine how many to print</span>
00304                 <span class="keywordtype">int</span> nPrint = item-&gt;<a class="code" href="structParamSetItem.html#o1">nItems</a>;
00305                 ret += string(<span class="stringliteral">"\""</span>);
00306                 ret += typeString;
00307                 ret += item-&gt;<a class="code" href="structParamSetItem.html#o0">name</a>;
00308                 ret += string(<span class="stringliteral">"\""</span>);
00309                 ret += string(<span class="stringliteral">" ["</span>);
00310                 <span class="keywordflow">for</span> (j = 0; j &lt; nPrint; ++j)
00311                         bufp += sprintf(bufp, <span class="stringliteral">"%.8g %.8g %.8g "</span>, item-&gt;<a class="code" href="structParamSetItem.html#o2">data</a>[j].x,
00312                                 item-&gt;<a class="code" href="structParamSetItem.html#o2">data</a>[j].y, item-&gt;<a class="code" href="structParamSetItem.html#o2">data</a>[j].z);
00313                 ret += buf;
00314                 ret += string(<span class="stringliteral">"] "</span>);
00315         }
00316         <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="classParamSet.html#r4">vectors</a>.size(); ++i) {
00317                 <span class="keywordtype">char</span> *bufp = buf;
00318                 <a class="code" href="structParamSetItem.html">ParamSetItem&lt;Vector&gt;</a> *item = <a class="code" href="classParamSet.html#r4">vectors</a>[i];
00319                 typeString = <span class="stringliteral">"vector "</span>;
00320                 <span class="comment">// Print _ParamSetItem_ declaration, determine how many to print</span>
00321                 <span class="keywordtype">int</span> nPrint = item-&gt;<a class="code" href="structParamSetItem.html#o1">nItems</a>;
00322                 ret += string(<span class="stringliteral">"\""</span>);
00323                 ret += typeString;
00324                 ret += item-&gt;<a class="code" href="structParamSetItem.html#o0">name</a>;
00325                 ret += string(<span class="stringliteral">"\""</span>);
00326                 ret += string(<span class="stringliteral">" ["</span>);
00327                 <span class="keywordflow">for</span> (j = 0; j &lt; nPrint; ++j)
00328                         bufp += sprintf(bufp, <span class="stringliteral">"%.8g %.8g %.8g "</span>, item-&gt;<a class="code" href="structParamSetItem.html#o2">data</a>[j].x,
00329                                 item-&gt;<a class="code" href="structParamSetItem.html#o2">data</a>[j].y, item-&gt;<a class="code" href="structParamSetItem.html#o2">data</a>[j].z);
00330                 ret += buf;
00331                 ret += string(<span class="stringliteral">"] "</span>);
00332         }
00333         <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="classParamSet.html#r5">normals</a>.size(); ++i) {
00334                 <span class="keywordtype">char</span> *bufp = buf;
00335                 <a class="code" href="structParamSetItem.html">ParamSetItem&lt;Normal&gt;</a> *item = <a class="code" href="classParamSet.html#r5">normals</a>[i];
00336                 typeString = <span class="stringliteral">"normal "</span>;
00337                 <span class="comment">// Print _ParamSetItem_ declaration, determine how many to print</span>
00338                 <span class="keywordtype">int</span> nPrint = item-&gt;<a class="code" href="structParamSetItem.html#o1">nItems</a>;
00339                 ret += string(<span class="stringliteral">"\""</span>);
00340                 ret += typeString;
00341                 ret += item-&gt;<a class="code" href="structParamSetItem.html#o0">name</a>;
00342                 ret += string(<span class="stringliteral">"\""</span>);
00343                 ret += string(<span class="stringliteral">" ["</span>);
00344                 <span class="keywordflow">for</span> (j = 0; j &lt; nPrint; ++j)
00345                         bufp += sprintf(bufp, <span class="stringliteral">"%.8g %.8g %.8g "</span>, item-&gt;<a class="code" href="structParamSetItem.html#o2">data</a>[j].x,
00346                                 item-&gt;<a class="code" href="structParamSetItem.html#o2">data</a>[j].y, item-&gt;<a class="code" href="structParamSetItem.html#o2">data</a>[j].z);
00347                 ret += buf;
00348                 ret += string(<span class="stringliteral">"] "</span>);
00349         }
00350         <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="classParamSet.html#r7">strings</a>.size(); ++i) {
00351                 <span class="keywordtype">char</span> *bufp = buf;
00352                 <a class="code" href="structParamSetItem.html">ParamSetItem&lt;string&gt;</a> *item = <a class="code" href="classParamSet.html#r7">strings</a>[i];
00353                 typeString = <span class="stringliteral">"string "</span>;
00354                 <span class="comment">// Print _ParamSetItem_ declaration, determine how many to print</span>
00355                 <span class="keywordtype">int</span> nPrint = item-&gt;<a class="code" href="structParamSetItem.html#o1">nItems</a>;
00356                 ret += string(<span class="stringliteral">"\""</span>);
00357                 ret += typeString;
00358                 ret += item-&gt;<a class="code" href="structParamSetItem.html#o0">name</a>;
00359                 ret += string(<span class="stringliteral">"\""</span>);
00360                 ret += string(<span class="stringliteral">" ["</span>);
00361                 <span class="keywordflow">for</span> (j = 0; j &lt; nPrint; ++j)
00362                         bufp += sprintf(bufp, <span class="stringliteral">"\"%s\" "</span>, item-&gt;<a class="code" href="structParamSetItem.html#o2">data</a>[j].c_str());
00363                 ret += buf;
00364                 ret += string(<span class="stringliteral">"] "</span>);
00365         }
00366         <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="classParamSet.html#r8">textures</a>.size(); ++i) {
00367                 <span class="keywordtype">char</span> *bufp = buf;
00368                 <a class="code" href="structParamSetItem.html">ParamSetItem&lt;string&gt;</a> *item = <a class="code" href="classParamSet.html#r8">textures</a>[i];
00369                 typeString = <span class="stringliteral">"texture "</span>;
00370                 <span class="comment">// Print _ParamSetItem_ declaration, determine how many to print</span>
00371                 <span class="keywordtype">int</span> nPrint = item-&gt;<a class="code" href="structParamSetItem.html#o1">nItems</a>;
00372                 ret += string(<span class="stringliteral">"\""</span>);
00373                 ret += typeString;
00374                 ret += item-&gt;<a class="code" href="structParamSetItem.html#o0">name</a>;
00375                 ret += string(<span class="stringliteral">"\""</span>);
00376                 ret += string(<span class="stringliteral">" ["</span>);
00377                 <span class="keywordflow">for</span> (j = 0; j &lt; nPrint; ++j)
00378                         bufp += sprintf(bufp, <span class="stringliteral">"\"%s\" "</span>, item-&gt;<a class="code" href="structParamSetItem.html#o2">data</a>[j].c_str());
00379                 ret += buf;
00380                 ret += string(<span class="stringliteral">"] "</span>);
00381         }
00382         <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="classParamSet.html#r6">spectra</a>.size(); ++i) {
00383                 <span class="keywordtype">char</span> *bufp = buf;
00384                 <a class="code" href="structParamSetItem.html">ParamSetItem&lt;Spectrum&gt;</a> *item = <a class="code" href="classParamSet.html#r6">spectra</a>[i];
00385                 typeString = <span class="stringliteral">"color "</span>;
00386                 <span class="comment">// Print _ParamSetItem_ declaration, determine how many to print</span>
00387                 <span class="keywordtype">int</span> nPrint = item-&gt;<a class="code" href="structParamSetItem.html#o1">nItems</a>;
00388                 ret += string(<span class="stringliteral">"\""</span>);
00389                 ret += typeString;
00390                 ret += item-&gt;<a class="code" href="structParamSetItem.html#o0">name</a>;
00391                 ret += string(<span class="stringliteral">"\""</span>);
00392                 ret += string(<span class="stringliteral">" ["</span>);
00393                 <span class="keywordflow">for</span> (j = 0; j &lt; nPrint; ++j)
00394                         bufp += sprintf(bufp, <span class="stringliteral">"%.8g %.8g %.8g "</span>, item-&gt;<a class="code" href="structParamSetItem.html#o2">data</a>[j].c[0],
00395                                 item-&gt;<a class="code" href="structParamSetItem.html#o2">data</a>[j].c[1], item-&gt;<a class="code" href="structParamSetItem.html#o2">data</a>[j].c[2]);
00396                 ret += buf;
00397                 ret += string(<span class="stringliteral">"] "</span>);
00398         }
00399         <span class="keywordflow">return</span> ret;
00400 }
00401 <span class="comment">// TextureParams Method Definitions</span>
00402 <a class="code" href="classReference.html">Reference&lt;Texture&lt;Spectrum&gt;</a> &gt;
<a name="l00403"></a><a class="code" href="classTextureParams.html#a1">00403</a>         <a class="code" href="classTextureParams.html#a1">TextureParams::GetSpectrumTexture</a>(<span class="keyword">const</span> string &amp;n,
00404              <span class="keyword">const</span> <a class="code" href="classSpectrum.html">Spectrum</a> &amp;def)<span class="keyword"> const </span>{
00405         string name = <a class="code" href="classTextureParams.html#r0">geomParams</a>.<a class="code" href="classParamSet.html#a29">FindTexture</a>(n);
00406         <span class="keywordflow">if</span> (name == <span class="stringliteral">""</span>) name = <a class="code" href="classTextureParams.html#r1">materialParams</a>.<a class="code" href="classParamSet.html#a29">FindTexture</a>(n);
00407         <span class="keywordflow">if</span> (name != <span class="stringliteral">""</span>) {
00408                 <span class="keywordflow">if</span> (<a class="code" href="classTextureParams.html#r3">spectrumTextures</a>.find(name) !=
00409                        <a class="code" href="classTextureParams.html#r3">spectrumTextures</a>.end())
00410                         <span class="keywordflow">return</span> <a class="code" href="classTextureParams.html#r3">spectrumTextures</a>[name];
00411                 <span class="keywordflow">else</span>
00412                         <a class="code" href="util_8cpp.html#a16">Error</a>(<span class="stringliteral">"Couldn't find spectrum"</span>
00413                               <span class="stringliteral">"texture named \"%s\""</span>, n.c_str());
00414         }
00415         <a class="code" href="classSpectrum.html">Spectrum</a> val = <a class="code" href="classTextureParams.html#r0">geomParams</a>.<a class="code" href="classParamSet.html#a27">FindOneSpectrum</a>(n,
00416                 <a class="code" href="classTextureParams.html#r1">materialParams</a>.<a class="code" href="classParamSet.html#a27">FindOneSpectrum</a>(n, def));
00417         <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classConstantTexture.html">ConstantTexture&lt;Spectrum&gt;</a>(val);
00418 }
<a name="l00419"></a><a class="code" href="classTextureParams.html#a2">00419</a> <a class="code" href="classReference.html">Reference&lt;Texture&lt;float&gt;</a> &gt; <a class="code" href="classTextureParams.html#a2">TextureParams::GetFloatTexture</a>(<span class="keyword">const</span> string &amp;n,
00420                 <span class="keywordtype">float</span> def)<span class="keyword"> const </span>{
00421         string name = <a class="code" href="classTextureParams.html#r0">geomParams</a>.<a class="code" href="classParamSet.html#a29">FindTexture</a>(n);
00422         <span class="keywordflow">if</span> (name == <span class="stringliteral">""</span>) name = <a class="code" href="classTextureParams.html#r1">materialParams</a>.<a class="code" href="classParamSet.html#a29">FindTexture</a>(n);
00423         <span class="keywordflow">if</span> (name != <span class="stringliteral">""</span>) {
00424                 <span class="keywordflow">if</span> (<a class="code" href="classTextureParams.html#r2">floatTextures</a>.find(name) != <a class="code" href="classTextureParams.html#r2">floatTextures</a>.end())
00425                         <span class="keywordflow">return</span> <a class="code" href="classTextureParams.html#r2">floatTextures</a>[name];
00426                 <span class="keywordflow">else</span>
00427                         <a class="code" href="util_8cpp.html#a16">Error</a>(<span class="stringliteral">"Couldn't find float texture named \"%s\""</span>, n.c_str());
00428         }
00429         <span class="keywordtype">float</span> val = <a class="code" href="classTextureParams.html#r0">geomParams</a>.<a class="code" href="classParamSet.html#a21">FindOneFloat</a>(n,
00430                 <a class="code" href="classTextureParams.html#r1">materialParams</a>.<a class="code" href="classParamSet.html#a21">FindOneFloat</a>(n, def));
00431         <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classConstantTexture.html">ConstantTexture&lt;float&gt;</a>(val);
00432 }
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Mon Apr 25 19:00:22 2005 for pbrt by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>
